---
title: 使用Charles抓包安卓模拟器（MuMu）
date: 2019-12-30 00:02:59
tags:
- 工具配置
- charles
categories: 
- 工具配置
---


>&#160; &#160; &#160; &#160;在进行app、小程序爬虫的时候，由于app没有浏览器这种可以直观看到后台请求的工具，所以要想获取该请求，往往是通过一些抓包软件抓取数据。
&#160; &#160; &#160; &#160;[Charles](https://www.charlesproxy.com/)就是一个网络抓包工具，相比Fiddler，其功能更加强大，并且跨平台的支持更好。所以移动端的抓包工具主要使用Charles。它支持SSL握手，可以自动根据根证书生成一个签名的服务器证书，并且它的官网为我们提供了一个根证书。
&#160; &#160; &#160; &#160;现在https协议运用得越来越广泛，如果一个app应用了https，那Charles所抓到的包只能显示乱码，所以需要在Charles上配置相关SSL证书。
<!--more-->

整个配置大概分为以下几个步骤：
&#160; &#160; &#160; &#160;1. 在PC上下载Charles。
&#160; &#160; &#160; &#160;2. PC端配置，在客户端安装好这个根证书，然后让我们的操作系统信任它。
&#160; &#160; &#160; &#160;3. 移动端配置，在IOS或Android上指定Charles为它的代理服务器，并装上这个官网提供的根证书。

&#160; &#160; &#160; &#160;*本人使用的是Windows+MuMu模拟器。*
###1. 下载Charles
&#160; &#160; &#160; &#160;官网上可以发现[Charles](https://www.charlesproxy.com/)支持Windows、Mac、Linux三个平台，我们只需选择对应的下载即可，这里不再赘述。
###2. PC端配置
- 证书配置

![](/tools-charles/1.png)

![](/tools-charles/2.png)
点击安装证书。
![](/tools-charles/3.png)
![](/tools-charles/4.jpg)

![](/tools-charles/5.png)
&#160; &#160; &#160; &#160;默认端口是8888，也可以自行设置。
  
&#160; &#160; &#160; &#160;到这，PC端证书配置就完成了。
###3. 移动端配置
![](/tools-charles/6.png)

![](/tools-charles/7.jpg)

&#160; &#160; &#160; &#160;代理服务器主机名设置成PC的IP地址，可用cmd ipconfig查看。
&#160; &#160; &#160; &#160;然后在浏览器中打开：chls.pro/ssl 
&#160; &#160; &#160; &#160;模拟器中会下载一个包含CA证书的数据文件，完成后打开，显示如下。

![](/tools-charles/8.png)

&#160; &#160; &#160; &#160;在证书名称中输入charles后确定即可。

***现在就可以在Charles中抓到模拟器中的https包啦。***
