---
title: http协议的幂等性问题
tags:
  - http
categories:
  - 
date: 2019-12-27 20:33:13
---
>关于http协议4种主要方法的幂等性问题
<!--more-->

首先理解一下幂等性：
**幂等**
&#160; &#160; &#160; &#160;对于同一种行为，如果执行不论多少次，最终的结果都是一致相同的，就称这种行为是幂等的。

**非幂等**
&#160; &#160; &#160; &#160;对于同一种行为，如果最终的结果与执行的次数有关，每次执行后结果都不相同，就称这种行为为非幂等。

---

&#160; &#160; &#160; &#160;下面就结合HTTP   **GET、DELETE、PUT、POST**来介绍下这四种主要方法的语义和幂等性。

## HTTP GET
**HTTP GET方法用于获取资源，不应有副作用，所以是幂等的。**
&#160; &#160; &#160; &#160;例如：`GET  http://www.*****.com/article/123`，不会改变资源的状态，所以无论获取多少次，都是没有副作用的。需要注意的是，没有副作用并不代表返回的结果相同，例如`GET  http://www.*****.com/latest-article`，返回最新文章，虽然其返回的内容可能是不同的，但是没有对资源产生副作用，所以GET方法是幂等的。
## HTTP DELETE
**HTTP DELETE方法用于删除资源，有副作用，但它应该满足幂等性。**
&#160; &#160; &#160; &#160;例如：`DELETE  http://www.*****.com/article/123`，调用多少次，对系统产生的副作用都是相同的，即是删除ID为123的文章，其对应的是删除资源本身，无论调用多少次或刷新页面，不必担心引起错误，它是满足幂等性的。
   
比较容易混淆的是PUT和POST：
&#160; &#160; &#160; &#160;POST和PUT的区别容易被简单地误认为“POST表示创建资源，PUT表示更新资源”；而实际上，二者**均可用于创建资源**，更为本质的差别是在幂等性方面。

## HTTP POST
**HTTP POST所对应的URI并非创建的资源本身，而是资源的接收者，所以它不是幂等的。**
{% note default %}&#160; &#160; &#160; &#160;例如：`POST http://www.*****.com/article`的语义是在http://www.*****.com/article下创建一篇文章，HTTP响应中应包含文章的创建状态以及文章的URI。两次相同的POST请求会在服务器端创建两份资源，它们具有不同的URI；所以，POST方法不具备幂等性。{% endnote %}

## HTTP PUT
**HTTP PUT所对应的URI是要创建或更新的资源本身，所以它是幂等的。**
&#160; &#160; &#160; &#160;例如：`PUT http://www.*****.com/article/123`的语义是创建或更新ID为123的文章。对同一URI进行多次PUT的副作用和一次PUT是相同的；因此，PUT方法具有幂等性。

参考:https://blog.csdn.net/bieleyang/article/details/76272699